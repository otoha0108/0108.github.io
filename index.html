<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <!-- Responsive meta tag for smartphones, prevents zoom on input fields -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>HELL0w0RLD! Interactive</title>
    <style>
        body {
            background: #1a1a1a;
            color: #00ffcc;
            font-family: 'Courier New', monospace;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            font-size: 16px; /* larger font to avoid mobile zoom */
        }
        #terminal {
            background: #000;
            border: 2px solid #00ffcc;
            padding: 16px;
            width: 90vw;
            max-width: 600px;
            height: 80vh;
            overflow-y: auto;
            box-sizing: border-box;
            position: relative;
        }
        #output {
            white-space: pre-wrap;
            margin-bottom: 12px;
        }
        #input-container {
            display: flex;
            align-items: center;
        }
        #prompt {
            color: #ff0077;
            margin-right: 8px;
        }
        #userInput {
            background: transparent;
            border: none;
            color: #00ffcc;
            font-family: inherit;
            font-size: 1em;
            outline: none;
            flex-grow: 1;
            border-bottom: 1px solid #00ffcc;
            padding: 2px;
        }
        #enterBtn {
            background: #00ffcc;
            border: 2px solid #00ffcc;
            color: #000;
            padding: 4px 10px;
            font-size: 1em;
            cursor: pointer;
            margin-left: 6px;
            display: none; /* hidden by default */
        }
    </style>
</head>
<body>
    <div id="terminal">
        <div id="output">üåê HELL0w0RLD! üåê</div>
        <div id="input-container">
            <span id="prompt">üì° 0108: What's on your mind? &gt;</span>
            <input type="text" id="userInput" placeholder="Type a command..." autocomplete="off">
            <button id="enterBtn">Enter</button>
        </div>
    </div>

    <script>
        const output = document.getElementById('output');
        const promptEl = document.getElementById('prompt');
        const userInput = document.getElementById('userInput');
        const enterBtn = document.getElementById('enterBtn');
        let isProcessing = false;

        /** Helper to append a line of HTML to the output pane. */
        function addLine(html) {
            const div = document.createElement('div');
            div.innerHTML = html;
            output.appendChild(div);
            output.scrollTop = output.scrollHeight;
        }

        /** Processes input commands from the user. */
        function processInput() {
            if (isProcessing) return;
            const text = userInput.value.trim().toLowerCase();
            if (!text) return;
            addLine(promptEl.textContent + ' ' + text);
            userInput.value = '';
            if (text.includes('sos')) {
                handleSOS();
            } else if (text.includes('lonely')) {
                handleLonely();
            } else if (text.includes('hate myself')) {
                handleHate();
            } else if (text.includes('why')) {
                handleWhy();
            }
        }

        /** Handles the SOS command with progress bar and virus elimination. */
        async function handleSOS() {
            isProcessing = true;
            addLine('0108 can catch your signal anytime!');
            // progress bar
            for (let i = 0; i <= 10; i++) {
                const bar = '‚ñà'.repeat(i) + '-'.repeat(10 - i);
                if (i > 0) {
                    // remove previous bar
                    output.removeChild(output.lastChild);
                }
                addLine('Scanning your heart... [' + bar + ']');
                await new Promise(r => setTimeout(r, 300));
            }
            addLine('<span style="color:red;">üö® Alert! Virus detected!</span>');
            addLine('<span style="color:red;">Press Enter or tap the button to let 0108 take down the virus!</span>');
            // Show the Enter button and set up handler
            enterBtn.style.display = 'inline-block';
            function onEnter(e) {
                if (e.key === 'Enter' || e.type === 'click') {
                    e.preventDefault();
                    userInput.removeEventListener('keydown', onEnter);
                    enterBtn.removeEventListener('click', onEnter);
                    enterBtn.style.display = 'none';
                    addLine('0108 will take down the virus!');
                    (async () => {
                        for (let i = 1; i <= 10; i++) {
                            if (i > 1) output.removeChild(output.lastChild);
                            addLine(('‚ö° ').repeat(i));
                            await new Promise(r => setTimeout(r, 200));
                        }
                        addLine('‚úÖ Virus eliminated! <br>Heart status: 150% clean.');
                        isProcessing = false;
                    })();
                }
            }
            enterBtn.addEventListener('click', onEnter);
            userInput.addEventListener('keydown', onEnter);
        }

        /** Handles the lonely command. */
        async function handleLonely() {
            isProcessing = true;
            addLine("OK. Let's listen to music with something sweet!");
            // Ask for favourite song using a browser prompt
            let songName = window.prompt("üì° 0108: Enter your favorite song name");
            if (!songName) songName = 'Unknown song';
            addLine("Now Playing '" + songName + "' in your head!");
            addLine("0108 is always here to sing for you üéµ");
            isProcessing = false;
        }

        /** Handles the hate myself command. */
        async function handleHate() {
            isProcessing = true;
            addLine('üöó Time patrol active!');
            await new Promise(r => setTimeout(r, 100));
            const timelines = ['Past', 'Future'];
            for (const timeline of timelines) {
                let base = 'Traveling to your ' + timeline;
                for (let dot = 1; dot <= 3; dot++) {
                    const msg = base + '.'.repeat(dot);
                    if (dot > 1) {
                        output.removeChild(output.lastChild);
                    }
                    addLine(msg);
                    await new Promise(r => setTimeout(r, 1000));
                }
            }
            await new Promise(r => setTimeout(r, 1000));
            addLine("Every moment's full of light.‚ú® You're perfect as is.");
            isProcessing = false;
        }

        /** Handles the why command. */
        async function handleWhy() {
            isProcessing = true;
            addLine('0108 is thinking...');
            for (let i = 0; i < 10; i++) {
                await new Promise(r => setTimeout(r, 1000));
                addLine('.');
            }
            addLine('This program will never stop until you find the answer.');
            // Show a simple clock icon every second indefinitely
            setInterval(() => {
                addLine('üïí');
            }, 1000);
        }

        // Event listeners for user input
        userInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                processInput();
            }
        });
        // Only show Enter button when needed; clicking it processes input
        enterBtn.addEventListener('click', processInput);
    </script>
</body>
</html>
