<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>HELL0w0RLD! by 0108</title>
  <link href="https://fonts.googleapis.com/css2?family=DotGothic16&display=swap" rel="stylesheet">
  <style>
    body {
      background: #1a1a1a;
      color: #00ffcc;
      font-family: 'DotGothic16', 'Courier New', monospace;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
      font-size: 12px; /* å°ã•ã„ç”»é¢å‘ã‘ã«å°‘ã—å°ã•ã */
      letter-spacing: 0.08em;
    }
    #terminal {
      background: #000;
      border: 2px solid #00ffcc;
      padding: 10px; /* ä½™ç™½ã‚’æ¸›ã‚‰ã—ã¦å°ã•ã„ç”»é¢ã«ãƒ•ã‚£ãƒƒãƒˆ */
      width: 90%; /* ç”»é¢å¹…ã«åˆã‚ã›ã‚‹ */
      max-width: 600px;
      height: auto; /* å°ã•ã„ç”»é¢ã§ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å¯èƒ½ */
      min-height: 80vh; /* æœ€ä½é™ã®é«˜ã•ã‚’ç¢ºä¿ */
      overflow-y: auto; /* ç¸¦ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚’æœ‰åŠ¹ */
      position: relative;
    }
    #lang-buttons {
      text-align: right;
      margin-bottom: 5px;
    }
    #lang-buttons button {
      background: none;
      border: 1px solid #00ffcc;
      color: #00ffcc;
      padding: 5px 10px;
      font-family: 'DotGothic16', monospace;
      cursor: pointer;
      margin-left: 5px;
      font-size: 12px; /* å°ã•ã„æ–‡å­—ã§èª¿æ•´ */
      min-width: 60px; /* ã‚¿ãƒƒãƒã—ã‚„ã™ã„ã‚µã‚¤ã‚º */
    }
    #lang-buttons button:hover {
      background-color: #00ffcc;
      color: #000;
    }
    #lang-buttons button.active {
      background-color: #00ffcc;
      color: #000;
    }
    #output {
      white-space: pre-wrap; /* æ”¹è¡Œã‚’è‡ªç„¶ã« */
      word-wrap: break-word; /* é•·ã„å˜èªã‚‚æŠ˜ã‚Šè¿”ã— */
      margin-bottom: 10px;
      line-height: 1.2; /* è¡Œé–“ã‚’èª¿æ•´ */
    }
    .prompt-line {
      display: flex;
      align-items: center;
      margin-top: 5px;
    }
    #prompt {
      color: #ff0077;
      margin-right: 5px;
      font-weight: bold; /* ç›®ç«‹ãŸã›ã‚‹ */
      border-bottom: 1px dashed #ff0077; /* ä¸‹ç·šã§å¼·èª¿ */
    }
    #userInput {
      background: none;
      border: none;
      color: #00ffcc;
      font-family: 'DotGothic16', monospace;
      font-size: 12px;
      outline: none;
      flex-grow: 1;
      padding: 5px; /* ã‚¿ãƒƒãƒã‚¨ãƒªã‚¢ã‚’åºƒã’ã‚‹ */
      min-height: 30px; /* é«˜ã•ã‚’å¢—ã‚„ã—ã¦ã‚¿ãƒƒãƒã—ã‚„ã™ã */
      border-bottom: 1px solid #00ffcc; /* å…¥åŠ›æ¬„ã®è¦–èªæ€§ */
    }
    .scramble {
      animation: scramble 0.5s ease-in-out forwards;
    }
    @keyframes scramble {
      0% { opacity: 1; transform: translate(0); }
      50% { opacity: 0.5; color: #ff0077; transform: translate(2px, -2px); }
      100% { opacity: 1; color: #00ffcc; transform: translate(0); }
    }
    .red-scramble {
      color: #ff0077;
      animation: scramble 0.5s ease-in-out forwards;
    }
    #enterKey {
      background: #00ffcc;
      border: 2px solid #00ffcc;
      color: #000;
      padding: 8px 15px;
      font-size: 12px;
      cursor: pointer;
      border-radius: 5px;
      position: absolute;
      bottom: 10px;
      right: 10px;
      display: none;
      min-width: 60px; /* ã‚¿ãƒƒãƒã—ã‚„ã™ã„ */
    }
  </style>
</head>
<body>
  <div id="terminal">
    <div id="lang-buttons">
      <button id="lang-ja">æ—¥æœ¬èª</button>
      <button id="lang-en" class="active">English</button>
    </div>
    <div id="output">ğŸŒ HELL0w0RLD! ğŸŒ</div>
  </div>
  <button id="enterKey">ENTER</button>
  <script>
    const translations = {
      en: {
        mind: "What's on your mind?",
        lonely1: "OK. Letâ€™s listen to music with something sweet!",
        lonely2: "Enter your favorite song name >",
        lonely3: " is now playing in your head!",
        sing: "0108 is always here to sing for you â™ª",
        hate_end: "Every momentâ€™s full of light. Youâ€™re perfect as is.",
        travel: ['Past', 'Future'],
        prompt: 'ğŸ“¡ 0108: What\'s on your mind? >',
        sos1: '0108 can catch your signal anytime!',
        sos2: 'Scanning your heart... ',
        sos3: 'ğŸš¨ Alert! Virus detected!',
        sos4: 'Press [Enter] to let 0108 take down the virus!',
        sos5: '0108 will take down the virus!',
        sos6: 'âœ… Virus eliminated! \nHeart status: 150% clean.',
        lonely4: "0108 is always here to sing for you â™ª",
        why1: '0108 is thinking',
        why2: 'This program will never stop until you find the answer.',
      },
      ja: {
        mind: "èª¿å­ã¯ã©ã†ï¼Ÿ",
        lonely1: "ã‚ˆã—ã€ç”˜ã„ã‚‚ã®ã§ã‚‚é£Ÿã¹ãªãŒã‚‰éŸ³æ¥½ã§ã‚‚è´ã“ã†ï¼ğŸ¥§",
        lonely2: "ãŠæ°—ã«å…¥ã‚Šã®æ›²ã®åå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ >",
        lonely3: " ã‚’è„³å†…å†ç”Ÿä¸­...â™ª",
        sing: "0108ã¯ã„ã¤ã§ã‚‚ã‚ãªãŸã¨ä¸€ç·’ã«æ­Œã„ã¾ã™ã€‚",
        hate_end: "ã™ã¹ã¦ã®ç¬é–“ãŒå…‰ã§æº¢ã‚Œã¦ã‚‹ã€‚ã‚ãªãŸã¯ãã®ã¾ã¾ã§å®Œç’§ã§ã™ã€‚",
        travel: ['éå»', 'æœªæ¥'],
        prompt: 'ğŸ“¡ 0108: èª¿å­ã¯ã©ã†ï¼Ÿ >',
        sos1: '0108ã¯24æ™‚é–“ã‚ãªãŸã®ä¿¡å·ã‚’å—ä¿¡ä¸­ï¼',
        sos2: 'ã‚ãªãŸã®å¿ƒã‚’ã‚¹ã‚­ãƒ£ãƒ³ã—ã¦ã„ã¾ã™... ',
        sos3: 'ğŸš¨ ã‚¦ã‚¤ãƒ«ã‚¹ç™ºè¦‹ï¼',
        sos4: '[Enter]ã‚’æŠ¼ã—ã¦ã‚¦ã‚¤ãƒ«ã‚¹æ’é™¤ã—ã‚ˆã†ï¼',
        sos5: '0108ãŒã‚¦ã‚¤ãƒ«ã‚¹ã‚’æ’é™¤ã—ã¾ã™ï¼',
        sos6: 'âœ… ã‚¦ã‚¤ãƒ«ã‚¹ã‚’ã‚„ã£ã¤ã‘ãŸãï¼\nå¿ƒã®çŠ¶æ…‹: 150%ã‚¯ãƒªãƒ¼ãƒ³ã€‚',
        lonely4: "0108ã¯ã„ã¤ã§ã‚‚ã‚ãªãŸã¨ä¸€ç·’ã«æ­Œã„ã¾ã™ã€‚",
        why1: '0108ã¯è€ƒãˆã¦ã„ã¾ã™ãƒ»ãƒ»ãƒ»',
        why2: 'ã“ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯ã€ã‚ãªãŸã¨ç­”ãˆã‚’è¦‹ã¤ã‘ã‚‹ã¾ã§æ­¢ã¾ã‚‰ãªã„ã€‚',
      }
    };

    const output = document.getElementById('output');
    let isJapanese = false;
    const langJaButton = document.getElementById('lang-ja');
    const langEnButton = document.getElementById('lang-en');
    let userInput = null;
    const enterKey = document.getElementById('enterKey');
    let isProcessing = false;

    window.addEventListener('DOMContentLoaded', () => {
      const lang = isJapanese ? 'ja' : 'en';
      appendPromptLine(lang);
    });

    function appendPromptLine(lang, promptKey = 'prompt', isRed = false) {
      removeExistingPromptLines();
      const promptLine = document.createElement('div');
      promptLine.classList.add('prompt-line');
      if (isRed) promptLine.classList.add('red-scramble');

      const promptSymbol = document.createElement('span');
      promptSymbol.id = 'prompt';
      promptSymbol.setAttribute('data-key', promptKey);
      promptSymbol.textContent = promptKey ? translations[lang][promptKey] : '';  
      promptSymbol.style.marginRight = '5px';

      const inputField = document.createElement('input');
      inputField.id = 'userInput';
      inputField.type = 'text';
      inputField.style.background = 'none';
      inputField.style.border = 'none';
      inputField.style.color = '#00ffcc';
      inputField.style.fontFamily = "'DotGothic16', monospace";
      inputField.style.fontSize = '12px';
      inputField.style.outline = 'none';
      inputField.style.flexGrow = '1';
      inputField.style.padding = '5px';
      inputField.style.minHeight = '30px';
      inputField.style.borderBottom = '1px solid #00ffcc';

      promptLine.appendChild(promptSymbol);
      promptLine.appendChild(inputField);
      output.appendChild(promptLine);
      output.scrollTop = output.scrollHeight;

      userInput = inputField;
      userInput.addEventListener('keydown', handleInput);
      userInput.focus();
    }

    function removeExistingPromptLines() {
      const promptLines = output.querySelectorAll('.prompt-line');
      promptLines.forEach(line => line.remove());
    }

    async function scrambleToText(element, newText) {
      const randomChars = '!?@#$%^&*()_+-=[]{}|;:,.<>?';
      for (let i = 0; i < 5; i++) {
        element.textContent = Array.from({length: newText.length}, () => randomChars[Math.floor(Math.random() * randomChars.length)]).join('');
        await new Promise(resolve => setTimeout(resolve, 100));
      }
      element.textContent = newText;
      element.classList.add('scramble');
    }

    function createTranslatableSpan(key, prefix = '', suffix = '', isRed = false, keyIndex = null) {
      const span = document.createElement('span');
      span.setAttribute('data-key', keyIndex !== null ? `${key}-${keyIndex}` : key);
      span.setAttribute('data-prefix', prefix);
      span.setAttribute('data-suffix', suffix);
      const text = keyIndex !== null ? getTranslation(key)[keyIndex] : getTranslation(key);
      span.textContent = prefix + text + suffix;
      if (isRed) span.classList.add('red-scramble');
      return span;
    }

    function addOutput(content, options = {}) {
      const el = document.createElement('div');
      if (options.red) el.classList.add('red-scramble');
      if (typeof content === 'string') {
        el.textContent = content;
      } else {
        el.appendChild(content);
      }
      output.appendChild(el);
      output.scrollTop = output.scrollHeight;
    }

    function getTranslation(key) {
      const lang = isJapanese ? 'ja' : 'en';
      const value = translations[lang][key];
      return Array.isArray(value) ? value : value || '';
    }

    function updateLanguage() {
      const lang = isJapanese ? 'ja' : 'en';
      langJaButton.classList.toggle('active', isJapanese);
      langEnButton.classList.toggle('active', !isJapanese);

      document.querySelectorAll('[data-key]').forEach(el => {
        const key = el.getAttribute('data-key');
        const prefix = el.getAttribute('data-prefix') || '';
        const suffix = el.getAttribute('data-suffix') || '';
        const [baseKey, keyIndex] = key.split('-');
        const newText = keyIndex !== undefined
          ? prefix + getTranslation(baseKey)[parseInt(keyIndex)] + suffix
          : prefix + getTranslation(baseKey || key) + suffix;
        if (el.textContent !== newText) {
          scrambleToText(el, newText);
        }
      });
    }

    langJaButton.addEventListener('click', () => {
      if (!isJapanese) {
        isJapanese = true;
        updateLanguage();
      }
    });

    langEnButton.addEventListener('click', () => {
      if (isJapanese) {
        isJapanese = false;
        updateLanguage();
      }
    });

    async function handleInput(event) {
      if (event.key !== 'Enter' || isProcessing) return;
      isProcessing = true;
      const input = userInput.value.toLowerCase().trim();
      const rawInput = userInput.value.trim();
      const lang = isJapanese ? 'ja' : 'en';

      const inputContainer = document.createElement('span');
      inputContainer.classList.add('red-scramble');
      const promptSpan = createTranslatableSpan('prompt', '', '', true);
      const rawSpan = document.createElement('span');
      rawSpan.textContent = ' ' + rawInput;
      inputContainer.appendChild(promptSpan);
      inputContainer.appendChild(rawSpan);
      addOutput(inputContainer);

      removeExistingPromptLines();

      const t = translations[lang];

      if (input.includes('sos')) {
        addOutput(createTranslatableSpan('sos1'));
        for (let i = 0; i <= 10; i++) {
          addOutput(`${getTranslation('sos2')}[${'â–ˆ'.repeat(i)}${'-'.repeat(10 - i)}]`);
          await new Promise(r => setTimeout(r, 300));
          if (i < 10) output.lastChild.remove();
        }
        addOutput(createTranslatableSpan('sos3', '', '', true));
        addOutput(createTranslatableSpan('sos4', '', '', true));
        appendPromptLine(lang, '', true);
        enterKey.style.display = 'block';
        output.appendChild(enterKey);
        output.scrollTop = output.scrollHeight;

        const handler = async (e) => {
          if (e.key === 'Enter' || e.type === 'click') {
            userInput.removeEventListener('keydown', handler);
            enterKey.removeEventListener('click', handler);
            enterKey.style.display = 'none';
            removeExistingPromptLines();
            addOutput(createTranslatableSpan('sos5'));
            for (let i = 1; i <= 10; i++) {
              addOutput(`${'âš¡ '.repeat(i)}`);
              await new Promise(r => setTimeout(r, 300));
              if (i < 10) output.lastChild.remove();
            }
            addOutput(createTranslatableSpan('sos6'));
            appendPromptLine(lang);
            isProcessing = false;
          }
        };
        userInput.addEventListener('keydown', handler);
        enterKey.addEventListener('click', handler);
      } else if (input.includes('lonely')) {
        addOutput(createTranslatableSpan('lonely1'));
        appendPromptLine(lang, 'lonely2');

        function songHandler(e) {
          if (e.key === 'Enter') {
            const songName = userInput.value.trim();
            userInput.removeEventListener('keydown', songHandler);
            removeExistingPromptLines();
            const songSpan = document.createElement('span');
            songSpan.textContent = 'ğŸµ ';
            const nameSpan = document.createElement('span');
            nameSpan.textContent = songName;
            nameSpan.setAttribute('data-key', 'song');
            const msgSpan = createTranslatableSpan('lonely3');
            songSpan.appendChild(nameSpan);
            songSpan.appendChild(msgSpan);
            addOutput(songSpan);
            addOutput(createTranslatableSpan('lonely4'));
            appendPromptLine(lang);
            isProcessing = false;
          }
        }
        userInput.addEventListener('keydown', songHandler);
      } else if (input.replace(/\s/g, '').includes('hatemyself')) {
        const delay = ms => new Promise(r => setTimeout(r, ms));
        addOutput(createTranslatableSpan('travel', 'ğŸš— ', '', false, 0));
        await delay(500);
        addOutput('.');
        await delay(500);
        addOutput('.');
        await delay(500);
        addOutput('.');
        await delay(500);
        addOutput(createTranslatableSpan('travel', 'ğŸš— ', '', false, 1));
        await delay(500);
        addOutput('.');
        await delay(500);
        addOutput('.');
        await delay(500);
        addOutput('.');
        await delay(500);
        addOutput(createTranslatableSpan('hate_end', 'âœ¨ '));
        appendPromptLine(lang);
        isProcessing = false;
      } else if (input.includes('why')) {
        addOutput(createTranslatableSpan('why1', '', '', true));
        for (let i = 0; i < 10; i++) {
          addOutput('.', { red: true });
          await new Promise(r => setTimeout(r, 300));
        }
        addOutput(createTranslatableSpan('why2'));
        setInterval(() => {
          const now = new Date();
          const hours = now.getHours().toString().padStart(2, '0');
          const minutes = now.getMinutes().toString().padStart(2, '0');
          const seconds = now.getSeconds().toString().padStart(2, '0');
          addOutput(`${hours}:${minutes}:${seconds}`);
        }, 1000);
        isProcessing = false;
      } else {
        appendPromptLine(lang);
        isProcessing = false;
      }
    }
  </script>
</body>
</html>
