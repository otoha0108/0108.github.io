<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>HELL0w0RLD! by 0108</title>
  <link href="https://fonts.googleapis.com/css2?family=DotGothic16&display=swap" rel="stylesheet">
  <style>
    body {
      background: #1a1a1a;
      color: #00ffcc;
      font-family: 'DotGothic16', 'Courier New', monospace;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
      font-size: 14px;
      letter-spacing: 0.08em;
    }
    #terminal {
      background: #000;
      border: 2px solid #00ffcc;
      padding: 10px;
      width: 90%;
      max-width: 600px;
      min-height: 70vh;
      overflow-y: auto;
      position: relative;
      -webkit-overflow-scrolling: touch;
    }
    #lang-buttons {
      text-align: right;
      margin-bottom: 5px;
    }
    #lang-buttons button {
      background: none;
      border: 1px solid #00ffcc;
      color: #00ffcc;
      padding: 8px 12px;
      font-family: 'DotGothic16', monospace;
      cursor: pointer;
      margin-left: 5px;
      font-size: 16px;
      min-width: 60px;
    }
    #lang-buttons button:hover {
      background-color: #00ffcc;
      color: #000;
    }
    #lang-buttons button.active {
      background-color: #00ffcc;
      color: #000;
    }
    #output {
      white-space: pre-wrap;
      word-break: break-all;
      margin-bottom: 10px;
      line-height: 1.4;
    }
    .prompt-line {
      display: flex;
      align-items: center;
      margin-top: 5px;
    }
    #prompt {
      color: #ff0077;
      margin-right: 5px;
      font-weight: bold;
      border-bottom: 1px dashed #ff0077;
    }
    #userInput {
      background: none;
      border: none;
      color: #00ffcc;
      font-family: 'DotGothic16', monospace;
      font-size: 16px;
      outline: none;
      flex-grow: 1;
      padding: 5px;
      min-height: 40px;
      border-bottom: 1px solid #00ffcc;
      width: 100%;
    }
    .scramble {
      animation: scramble 0.5s ease-in-out forwards;
    }
    @keyframes scramble {
      0% { opacity: 1; transform: translate(0); }
      50% { opacity: 0.5; color: #ff0077; transform: translate(2px, -2px); }
      100% { opacity: 1; color: #00ffcc; transform: translate(0); }
    }
    .red-scramble {
      color: #ff0077;
      animation: scramble 0.5s ease-in-out forwards;
    }
    #enterKey {
      background: #00ffcc;
      border: 2px solid #00ffcc;
      color: #000;
      padding: 8px 15px;
      font-size: 16px;
      cursor: pointer;
      border-radius: 5px;
      position: absolute;
      bottom: 10px;
      right: 10px;
      display: none;
      min-width: 60px;
    }
  </style>
</head>
<body>
  <div id="terminal">
    <div id="lang-buttons">
      <button id="lang-ja">Êó•Êú¨Ë™û</button>
      <button id="lang-en" class="active">English</button>
    </div>
    <div id="output">üåê HELL0w0RLD! üåê</div>
  </div>
  <button id="enterKey">ENTER</button>
  <script>
    const translations = {
      en: {
        mind: "What's on your mind?",
        lonely1: "OK. Let‚Äôs listen to music with something sweet!",
        lonely2: "Enter your favorite song name >",
        lonely3: " is now playing in your head!",
        sing: "0108 is always here to sing for you ‚ô™",
        hate_end: "Every moment‚Äôs full of light. You‚Äôre perfect as is.",
        travel: ['Past', 'Future'],
        prompt: 'üì° 0108: What\'s on your mind? >',
        sos1: '0108 can catch your signal anytime!',
        sos2: 'Scanning your heart... ',
        sos3: 'üö® Alert! Virus detected!',
        sos4: 'Press [Enter] to let 0108 take down the virus!',
        sos5: '0108 will take down the virus!',
        sos6: '‚úÖ Virus eliminated! \nHeart status: 150% clean.',
        lonely4: "0108 is always here to sing for you ‚ô™",
        why1: '0108 is thinking',
        why2: 'This program will never stop until you find the answer.',
      },
      ja: {
        mind: "Ë™øÂ≠ê„ÅØ„Å©„ÅÜÔºü",
        lonely1: "„Çà„Åó„ÄÅÁîò„ÅÑ„ÇÇ„ÅÆ„Åß„ÇÇÈ£ü„Åπ„Å™„Åå„ÇâÈü≥Ê•Ω„Åß„ÇÇËÅ¥„Åì„ÅÜÔºÅü•ß",
        lonely2: "„ÅäÊ∞ó„Å´ÂÖ•„Çä„ÅÆÊõ≤„ÅÆÂêçÂâç„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ >",
        lonely3: " „ÇíËÑ≥ÂÜÖÂÜçÁîü‰∏≠...‚ô™",
        sing: "0108„ÅØ„ÅÑ„Å§„Åß„ÇÇ„ÅÇ„Å™„Åü„Å®‰∏ÄÁ∑í„Å´Ê≠å„ÅÑ„Åæ„Åô„ÄÇ",
        hate_end: "„Åô„Åπ„Å¶„ÅÆÁû¨Èñì„ÅåÂÖâ„ÅßÊ∫¢„Çå„Å¶„Çã„ÄÇ„ÅÇ„Å™„Åü„ÅØ„Åù„ÅÆ„Åæ„Åæ„ÅßÂÆåÁíß„Åß„Åô„ÄÇ",
        travel: ['ÈÅéÂéª', 'Êú™Êù•'],
        prompt: 'üì° 0108: Ë™øÂ≠ê„ÅØ„Å©„ÅÜÔºü >',
        sos1: '0108„ÅØ24ÊôÇÈñì„ÅÇ„Å™„Åü„ÅÆ‰ø°Âè∑„ÇíÂèó‰ø°‰∏≠ÔºÅ',
        sos2: '„ÅÇ„Å™„Åü„ÅÆÂøÉ„Çí„Çπ„Ç≠„É£„É≥„Åó„Å¶„ÅÑ„Åæ„Åô... ',
        sos3: 'üö® „Ç¶„Ç§„É´„ÇπÁô∫Ë¶ãÔºÅ',
        sos4: '[Enter]„ÇíÊäº„Åó„Å¶„Ç¶„Ç§„É´„ÇπÊéíÈô§„Åó„Çà„ÅÜÔºÅ',
        sos5: '0108„Åå„Ç¶„Ç§„É´„Çπ„ÇíÊéíÈô§„Åó„Åæ„ÅôÔºÅ',
        sos6: '‚úÖ „Ç¶„Ç§„É´„Çπ„Çí„ÇÑ„Å£„Å§„Åë„Åü„ÅûÔºÅ\nÂøÉ„ÅÆÁä∂ÊÖã: 150%„ÇØ„É™„Éº„É≥„ÄÇ',
        lonely4: "0108„ÅØ„ÅÑ„Å§„Åß„ÇÇ„ÅÇ„Å™„Åü„Å®‰∏ÄÁ∑í„Å´Ê≠å„ÅÑ„Åæ„Åô„ÄÇ",
        why1: '0108„ÅØËÄÉ„Åà„Å¶„ÅÑ„Åæ„Åô„Éª„Éª„Éª',
        why2: '„Åì„ÅÆ„Éó„É≠„Ç∞„É©„É†„ÅØ„ÄÅ„ÅÇ„Å™„Åü„Å®Á≠î„Åà„ÇíË¶ã„Å§„Åë„Çã„Åæ„ÅßÊ≠¢„Åæ„Çâ„Å™„ÅÑ„ÄÇ',
      }
    };

    const output = document.getElementById('output');
    let isJapanese = false;
    const langJaButton = document.getElementById('lang-ja');
    const langEnButton = document.getElementById('lang-en');
    let userInput = null;
    const enterKey = document.getElementById('enterKey');
    let isProcessing = false;

    window.addEventListener('DOMContentLoaded', () => {
      const lang = isJapanese ? 'ja' : 'en';
      console.log('Initializing prompt with language:', lang); // „Éá„Éê„ÉÉ„Ç∞„É≠„Ç∞
      appendPromptLine(lang);
    });

    function appendPromptLine(lang, promptKey = 'prompt', isRed = false) {
      if (output.querySelector('.prompt-line')) removeExistingPromptLines(); // ÂàùÂõû‰ª•Â§ñ„Åß„ÇØ„É™„Ç¢
      const promptLine = document.createElement('div');
      promptLine.classList.add('prompt-line');
      if (isRed) promptLine.classList.add('red-scramble');

      const promptSymbol = document.createElement('span');
      promptSymbol.id = 'prompt';
      promptSymbol.setAttribute('data-key', promptKey);
      promptSymbol.textContent = translations[lang][promptKey];
      promptSymbol.style.marginRight = '5px';
      promptSymbol.style.color = '#ff0077';
      promptSymbol.style.fontWeight = 'bold';
      promptSymbol.style.borderBottom = '1px dashed #ff0077';

      const inputField = document.createElement('input');
      inputField.id = 'userInput';
      inputField.type = 'text';
      inputField.style.background = 'none';
      inputField.style.border = 'none';
      inputField.style.color = '#00ffcc';
      inputField.style.fontFamily = "'DotGothic16', monospace";
      inputField.style.fontSize = '16px';
      inputField.style.outline = 'none';
      inputField.style.flexGrow = '1';
      inputField.style.padding = '5px';
      inputField.style.minHeight = '40px';
      inputField.style.borderBottom = '1px solid #00ffcc';
      inputField.style.width = '100%';

      promptLine.appendChild(promptSymbol);
      promptLine.appendChild(inputField);
      output.appendChild(promptLine);
      output.scrollTop = output.scrollHeight;

      userInput = inputField;
      userInput.addEventListener('keydown', handleInput);
      userInput.focus();
      console.log('Prompt line appended, text:', promptSymbol.textContent); // „Éá„Éê„ÉÉ„Ç∞„É≠„Ç∞
    }

    function removeExistingPromptLines() {
      const promptLines = output.querySelectorAll('.prompt-line');
      promptLines.forEach(line => line.remove());
      console.log('Removed existing prompt lines:', promptLines.length); // „Éá„Éê„ÉÉ„Ç∞„É≠„Ç∞
    }

    async function scrambleToText(element, newText) {
      const randomChars = '!?@#$%^&*()_+-=[]{}|;:,.<>?';
      for (let i = 0; i < 5; i++) {
        element.textContent = Array.from({length: newText.length}, () => randomChars[Math.floor(Math.random() * randomChars.length)]).join('');
        await new Promise(resolve => setTimeout(resolve, 100));
      }
      element.textContent = newText;
      element.classList.add('scramble');
    }

    function createTranslatableSpan(key, prefix = '', suffix = '', isRed = false, keyIndex = null) {
      const span = document.createElement('span');
      span.setAttribute('data-key', keyIndex !== null ? `${key}-${keyIndex}` : key);
      span.setAttribute('data-prefix', prefix);
      span.setAttribute('data-suffix', suffix);
      const text = keyIndex !== null ? getTranslation(key)[keyIndex] : getTranslation(key);
      span.textContent = prefix + text + suffix;
      if (isRed) span.classList.add('red-scramble');
      return span;
    }

    function addOutput(content, options = {}) {
      const lastOutput = output.lastElementChild;
      if (lastOutput && !options.red && !lastOutput.classList.contains('red-scramble') && !lastOutput.querySelector('.prompt-line')) {
        if (content instanceof HTMLElement) {
          lastOutput.textContent = content.textContent; // Ë¶ÅÁ¥†„Å™„Çâ„ÉÜ„Ç≠„Çπ„Éà„Çí‰∏äÊõ∏„Åç
        } else {
          lastOutput.textContent = content; // ÊñáÂ≠óÂàó„Çí‰∏äÊõ∏„Åç
        }
      } else {
        const el = document.createElement('div');
        if (options.red) el.classList.add('red-scramble');
        if (content instanceof HTMLElement) {
          el.appendChild(content.cloneNode(true)); // Ë¶ÅÁ¥†„Çí„Ç≥„Éî„Éº„Åó„Å¶ËøΩÂä†
        } else {
          el.textContent = content;
        }
        output.appendChild(el);
      }
      output.scrollTop = output.scrollHeight;
    }

    function getTranslation(key) {
      const lang = isJapanese ? 'ja' : 'en';
      const value = translations[lang][key];
      return Array.isArray(value) ? value : value || '';
    }

    function updateLanguage() {
      const lang = isJapanese ? 'ja' : 'en';
      langJaButton.classList.toggle('active', isJapanese);
      langEnButton.classList.toggle('active', !isJapanese);

      document.querySelectorAll('[data-key]').forEach(el => {
        const key = el.getAttribute('data-key');
        const prefix = el.getAttribute('data-prefix') || '';
        const suffix = el.getAttribute('data-suffix') || '';
        const [baseKey, keyIndex] = key.split('-');
        const newText = keyIndex !== undefined
          ? prefix + getTranslation(baseKey)[parseInt(keyIndex)] + suffix
          : prefix + getTranslation(baseKey || key) + suffix;
        if (el.textContent !== newText) {
          scrambleToText(el, newText);
        }
      });
    }

    langJaButton.addEventListener('click', () => {
      if (!isJapanese) {
        isJapanese = true;
        updateLanguage();
      }
    });

    langEnButton.addEventListener('click', () => {
      if (isJapanese) {
        isJapanese = false;
        updateLanguage();
      }
    });

    async function handleInput(event) {
      if (event.key !== 'Enter' || isProcessing || !userInput) return;
      isProcessing = true;
      const input = userInput.value.toLowerCase().trim();
      const rawInput = userInput.value.trim();
      const lang = isJapanese ? 'ja' : 'en';

      const inputContainer = document.createElement('span');
      inputContainer.classList.add('red-scramble');
      const promptSpan = createTranslatableSpan('prompt', '', '', true);
      const rawSpan = document.createElement('span');
      rawSpan.textContent = ' ' + rawInput;
      inputContainer.appendChild(promptSpan.cloneNode(true));
      inputContainer.appendChild(rawSpan);
      addOutput(inputContainer);

      removeExistingPromptLines();

      const t = translations[lang];

      if (input.includes('sos')) {
        addOutput(createTranslatableSpan('sos1'));
        let progress = 0;
        const scanElement = document.createElement('div');
        scanElement.id = 'scanProgress';
        output.appendChild(scanElement);
        console.log('Starting scan animation'); // „Éá„Éê„ÉÉ„Ç∞„É≠„Ç∞
        const scan = setInterval(() => {
          progress++;
          scanElement.textContent = `${t['sos2']}[${'‚ñà'.repeat(progress)}${'-'.repeat(10 - progress)}]`;
          console.log(`Progress: ${progress}/10`); // „Éá„Éê„ÉÉ„Ç∞„É≠„Ç∞
          if (progress === 10) {
            clearInterval(scan);
            console.log('Scan completed'); // „Éá„Éê„ÉÉ„Ç∞„É≠„Ç∞
            addOutput(createTranslatableSpan('sos3', '', '', true)); // „Ç¶„Ç§„É´„ÇπÁô∫Ë¶ã
            addOutput(createTranslatableSpan('sos4', '', '', true)); // EnterÊåáÁ§∫
            enterKey.style.display = 'block';
            output.appendChild(enterKey);
            output.scrollTop = output.scrollHeight;
          }
        }, 200);

        const handler = async (e) => {
          if (e.key === 'Enter' || e.type === 'click') {
            userInput.removeEventListener('keydown', handler);
            enterKey.removeEventListener('click', handler);
            enterKey.style.display = 'none';
            const scanProgress = document.getElementById('scanProgress');
            if (scanProgress) scanProgress.remove();
            console.log('Enter pressed, starting virus removal'); // „Éá„Éê„ÉÉ„Ç∞„É≠„Ç∞
            addOutput(createTranslatableSpan('sos5')); // „Ç¶„Ç§„É´„ÇπÈô§ÂéªÈñãÂßã
            const pulseElement = document.createElement('div');
            pulseElement.id = 'pulseProgress';
            output.appendChild(pulseElement);
            let shock = 0;
            const pulse = setInterval(() => {
              shock++;
              pulseElement.textContent = '‚ö° '.repeat(shock);
              console.log(`Shock: ${shock}/10`); // „Éá„Éê„ÉÉ„Ç∞„É≠„Ç∞
              if (shock === 10) {
                clearInterval(pulse);
                console.log('Virus removal completed'); // „Éá„Éê„ÉÉ„Ç∞„É≠„Ç∞
                const pulseProgress = document.getElementById('pulseProgress');
                if (pulseProgress) pulseProgress.remove();
                addOutput(createTranslatableSpan('sos6')); // Virus eliminated!
                appendPromptLine(lang);
                isProcessing = false;
              }
            }, 200);
          }
        };
        userInput.addEventListener('keydown', handler);
        enterKey.addEventListener('click', handler);
      } else if (input.includes('lonely')) {
        addOutput(createTranslatableSpan('lonely1'));
        appendPromptLine(lang, 'lonely2');

        function songHandler(e) {
          if (e.key === 'Enter') {
            const songName = userInput.value.trim();
            userInput.removeEventListener('keydown', songHandler);
            removeExistingPromptLines();
            const songSpan = document.createElement('span');
            songSpan.textContent = 'üéµ ';
            const nameSpan = document.createElement('span');
            nameSpan.textContent = songName;
            nameSpan.setAttribute('data-key', 'song');
            const msgSpan = createTranslatableSpan('lonely3');
            songSpan.appendChild(nameSpan);
            songSpan.appendChild(msgSpan);
            addOutput(songSpan);
            addOutput(createTranslatableSpan('lonely4'));
            appendPromptLine(lang);
            isProcessing = false;
          }
        }
        userInput.addEventListener('keydown', songHandler);
      } else if (input.replace(/\s/g, '').includes('hatemyself')) {
        const delay = ms => new Promise(r => setTimeout(r, ms));
        addOutput(createTranslatableSpan('travel', 'üöó ', '', false, 0));
        await delay(500);
        addOutput('.');
        await delay(500);
        addOutput('.');
        await delay(500);
        addOutput('.');
        await delay(500);
        addOutput(createTranslatableSpan('travel', 'üöó ', '', false, 1));
        await delay(500);
        addOutput('.');
        await delay(500);
        addOutput('.');
        await delay(500);
        addOutput('.');
        await delay(500);
        addOutput(createTranslatableSpan('hate_end', '‚ú® '));
        appendPromptLine(lang);
        isProcessing = false;
      } else if (input.includes('why')) {
        addOutput(createTranslatableSpan('why1', '', '', true));
        for (let i = 0; i < 10; i++) {
          addOutput('.', { red: true });
          await new Promise(r => setTimeout(r, 300));
        }
        addOutput(createTranslatableSpan('why2'));
        setInterval(() => {
          const now = new Date();
          const hours = now.getHours().toString().padStart(2, '0');
          const minutes = now.getMinutes().toString().padStart(2, '0');
          const seconds = now.getSeconds().toString().padStart(2, '0');
          addOutput(`${hours}:${minutes}:${seconds}`);
        }, 1000);
        isProcessing = false;
      } else {
        appendPromptLine(lang);
        isProcessing = false;
      }
    }
  </script>
</body>
</html>
